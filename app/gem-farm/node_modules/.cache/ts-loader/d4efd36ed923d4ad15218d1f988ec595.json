{"remainingRequest":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/babel-loader/lib/index.js!/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/ts-loader/index.js??ref--14-2!/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/AuthorizeFunder.vue?vue&type=script&lang=ts","dependencies":[{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/AuthorizeFunder.vue","mtime":1649527631511},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/babel.config.js","mtime":1649527631469},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/babel-loader/lib/index.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/ts-loader/index.js","mtime":1647186829000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/index.js","mtime":1647186847000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL21heWFuay9nZW13b3JrXzMvZ2VtLWZhcm0vYXBwL2dlbS1mYXJtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBkZWZpbmVDb21wb25lbnQsIG9uTW91bnRlZCwgcmVmLCB3YXRjaCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB1c2VXYWxsZXQgZnJvbSAnQC9jb21wb3NhYmxlcy93YWxsZXQnOwppbXBvcnQgdXNlQ2x1c3RlciBmcm9tICdAL2NvbXBvc2FibGVzL2NsdXN0ZXInOwppbXBvcnQgeyBpbml0R2VtRmFybSB9IGZyb20gJ0AvY29tbW9uL2dlbS1mYXJtJzsKaW1wb3J0IHsgUHVibGljS2V5IH0gZnJvbSAnQHNvbGFuYS93ZWIzLmpzJzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBwcm9wczogewogICAgZmFybTogU3RyaW5nCiAgfSwKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAocHJvcHMsIGN0eCkgewogICAgdmFyIF91c2VXYWxsZXQgPSB1c2VXYWxsZXQoKSwKICAgICAgICB3YWxsZXQgPSBfdXNlV2FsbGV0LndhbGxldCwKICAgICAgICBnZXRXYWxsZXQgPSBfdXNlV2FsbGV0LmdldFdhbGxldDsKCiAgICB2YXIgX3VzZUNsdXN0ZXIgPSB1c2VDbHVzdGVyKCksCiAgICAgICAgY2x1c3RlciA9IF91c2VDbHVzdGVyLmNsdXN0ZXIsCiAgICAgICAgZ2V0Q29ubmVjdGlvbiA9IF91c2VDbHVzdGVyLmdldENvbm5lY3Rpb247CgogICAgdmFyIGdmOwogICAgd2F0Y2goW3dhbGxldCwgY2x1c3Rlcl0sIC8qI19fUFVSRV9fKi9fYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gaW5pdEdlbUZhcm0oZ2V0Q29ubmVjdGlvbigpLCBnZXRXYWxsZXQoKSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZ2YgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSk7IC8vbmVlZCBhbiBvbm1vdW50ZWQgaG9vayBiZWNhdXNlIHRoaXMgY29tcG9uZW50IGlzbid0IHlldCBtb3VudGVkIHdoZW4gd2FsbGV0L2NsdXN0ZXIgYXJlIHNldAoKICAgIG9uTW91bnRlZCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKCEoZ2V0V2FsbGV0KCkgJiYgZ2V0Q29ubmVjdGlvbigpKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIGluaXRHZW1GYXJtKGdldENvbm5lY3Rpb24oKSwgZ2V0V2FsbGV0KCkpOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGdmID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA2OwogICAgICAgICAgICAgIHJldHVybiBnZXRDdXJyZW50RnVuZGVycyhwcm9wcy5mYXJtKTsKCiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSk7IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBmdW5kZXJzCgogICAgdmFyIHRvQXV0aG9yaXplID0gcmVmKCk7CiAgICB2YXIgdG9EZWF1dGhvcml6ZSA9IHJlZigpOwogICAgdmFyIGZ1bmRlcnMgPSByZWYoKTsKCiAgICB2YXIgZ2V0Q3VycmVudEZ1bmRlcnMgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKGZhcm0pIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdmLmZldGNoQWxsQXV0aFByb29mUERBcyhuZXcgUHVibGljS2V5KGZhcm0pKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZnVuZGVycy52YWx1ZSA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0Q3VycmVudEZ1bmRlcnMoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZjMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgYXV0aG9yaXplRnVuZGVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIGdmLmF1dGhvcml6ZUZ1bmRlcldhbGxldChuZXcgUHVibGljS2V5KHByb3BzLmZhcm0pLCBuZXcgUHVibGljS2V5KHRvQXV0aG9yaXplLnZhbHVlKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDdXJyZW50RnVuZGVycyhwcm9wcy5mYXJtKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGF1dGhvcml6ZUZ1bmRlcigpIHsKICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgZGVhdXRob3JpemVGdW5kZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZjUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gZ2YuZGVhdXRob3JpemVGdW5kZXJXYWxsZXQobmV3IFB1YmxpY0tleShwcm9wcy5mYXJtKSwgbmV3IFB1YmxpY0tleSh0b0RlYXV0aG9yaXplLnZhbHVlKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBnZXRDdXJyZW50RnVuZGVycyhwcm9wcy5mYXJtKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGRlYXV0aG9yaXplRnVuZGVyKCkgewogICAgICAgIHJldHVybiBfcmVmNS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHJldHVybiB7CiAgICAgIGZ1bmRlcnM6IGZ1bmRlcnMsCiAgICAgIHRvQXV0aG9yaXplOiB0b0F1dGhvcml6ZSwKICAgICAgdG9EZWF1dGhvcml6ZTogdG9EZWF1dGhvcml6ZSwKICAgICAgYXV0aG9yaXplRnVuZGVyOiBhdXRob3JpemVGdW5kZXIsCiAgICAgIGRlYXV0aG9yaXplRnVuZGVyOiBkZWF1dGhvcml6ZUZ1bmRlcgogICAgfTsKICB9Cn0pOw=="},{"version":3,"sources":["/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/AuthorizeFunder.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\nimport { defineComponent, onMounted, ref, watch } from 'vue';\nimport useWallet from '@/composables/wallet';\nimport useCluster from '@/composables/cluster';\nimport { initGemFarm } from '@/common/gem-farm';\nimport { PublicKey } from '@solana/web3.js';\n\nexport default defineComponent({\n  props: {\n    farm: String,\n  },\n  setup(props, ctx) {\n    const { wallet, getWallet } = useWallet();\n    const { cluster, getConnection } = useCluster();\n\n    let gf: any;\n    watch([wallet, cluster], async () => {\n      gf = await initGemFarm(getConnection(), getWallet()!);\n    });\n\n    //need an onmounted hook because this component isn't yet mounted when wallet/cluster are set\n    onMounted(async () => {\n      if (getWallet() && getConnection()) {\n        gf = await initGemFarm(getConnection(), getWallet()!);\n      }\n      await getCurrentFunders(props.farm!);\n    });\n\n    // --------------------------------------- funders\n    const toAuthorize = ref<string>();\n    const toDeauthorize = ref<string>();\n    const funders = ref<any[]>();\n\n    const getCurrentFunders = async (farm: string) => {\n      funders.value = await gf!.fetchAllAuthProofPDAs(new PublicKey(farm));\n    };\n\n    const authorizeFunder = async () => {\n      await gf!.authorizeFunderWallet(\n        new PublicKey(props.farm!),\n        new PublicKey(toAuthorize.value!)\n      );\n      await getCurrentFunders(props.farm!);\n    };\n\n    const deauthorizeFunder = async () => {\n      await gf!.deauthorizeFunderWallet(\n        new PublicKey(props.farm!),\n        new PublicKey(toDeauthorize.value!)\n      );\n      await getCurrentFunders(props.farm!);\n    };\n\n    return {\n      funders,\n      toAuthorize,\n      toDeauthorize,\n      authorizeFunder,\n      deauthorizeFunder,\n    };\n  },\n});\n"],"sourceRoot":""}]}