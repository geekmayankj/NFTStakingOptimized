{"remainingRequest":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/FarmerDisplay.vue?vue&type=template&id=86f7be18&ts=true","dependencies":[{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/FarmerDisplay.vue","mtime":1649527631518},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/babel-loader/lib/index.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/ts-loader/index.js","mtime":1647186829000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1647186847000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/cache-loader/dist/cjs.js","mtime":1647186788000},{"path":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/node_modules/vue-loader-v16/dist/index.js","mtime":1647186847000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBjbGFzcz0ibmVzLWNvbnRhaW5lciB3aXRoLXRpdGxlIj4KICAgIDxwIGNsYXNzPSJ0aXRsZSI+WW91ciBTdGFraW5nIEFjY291bnQ8L3A+CiAgICA8ZGl2IGNsYXNzPSJtYi0yIj4KICAgICAgc3RhdGU6CiAgICAgIDxwIGNsYXNzPSJpbmxpbmUtYmxvY2sgYmcteWVsbG93LTIwMCI+CiAgICAgICAge3sgcGFyc2VGYXJtZXJTdGF0ZShmYXJtZXJBY2MpIH19CiAgICAgIDwvcD4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0ibWItMiI+WW91ciBpZGVudGl0eToge3sgZmFybWVyQWNjLmlkZW50aXR5LnRvQmFzZTU4KCkgfX08L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1iLTIiPkFzc29jaWF0ZWQgdmF1bHQ6IHt7IGZhcm1lckFjYy52YXVsdC50b0Jhc2U1OCgpIH19PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJtYi0yIj5HZW1zIHN0YWtlZDoge3sgZmFybWVyQWNjLmdlbXNTdGFrZWQgfX08L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1iLTIiPgogICAgICBNaW4gc3Rha2luZyBlbmRzOiB7eyBwYXJzZURhdGUoZmFybWVyQWNjLm1pblN0YWtpbmdFbmRzVHMpIH19CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im1iLTUiPgogICAgICBDb29sZG93biBlbmRzOiB7eyBwYXJzZURhdGUoZmFybWVyQWNjLmNvb2xkb3duRW5kc1RzKSB9fQogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iZmxleCBtYi01Ij4KICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIG1yLTUiPgogICAgICAgIDxGYXJtZXJSZXdhcmREaXNwbGF5CiAgICAgICAgICA6a2V5PSJmYXJtZXJBY2MucmV3YXJkQSIKICAgICAgICAgIDpmYXJtUmV3YXJkPSJmYXJtQWNjLnJld2FyZEEiCiAgICAgICAgICA6cmV3YXJkPSJmYXJtZXJBY2MucmV3YXJkQSIKICAgICAgICAgIHRpdGxlPSJSZXdhcmQgQSIKICAgICAgICAvPgogICAgICA8L2Rpdj4KICAgICAgPGRpdiBjbGFzcz0iZmxleC0xIj4KICAgICAgICA8RmFybWVyUmV3YXJkRGlzcGxheQogICAgICAgICAgOmtleT0iZmFybWVyQWNjLnJld2FyZEIiCiAgICAgICAgICA6ZmFybVJld2FyZD0iZmFybUFjYy5yZXdhcmRCIgogICAgICAgICAgOnJld2FyZD0iZmFybWVyQWNjLnJld2FyZEIiCiAgICAgICAgICB0aXRsZT0iUmV3YXJkIEIiCiAgICAgICAgLz4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICAgIDxidXR0b24gY2xhc3M9Im5lcy1idG4gaXMtcHJpbWFyeSBtYi01IiBAY2xpY2s9InJlZnJlc2hGYXJtZXIiPgogICAgICBSZWZyZXNoIGFjY291bnQKICAgIDwvYnV0dG9uPgogIDwvZGl2Pgo="},{"version":3,"sources":["/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/FarmerDisplay.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MAClC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9D,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAC9D,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,C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","file":"/home/mayank/gemwork_3/gem-farm/app/gem-farm/src/components/gem-farm/FarmerDisplay.vue","sourceRoot":"","sourcesContent":["<template>\n  <div class=\"nes-container with-title\">\n    <p class=\"title\">Your Staking Account</p>\n    <div class=\"mb-2\">\n      state:\n      <p class=\"inline-block bg-yellow-200\">\n        {{ parseFarmerState(farmerAcc) }}\n      </p>\n    </div>\n    <div class=\"mb-2\">Your identity: {{ farmerAcc.identity.toBase58() }}</div>\n    <div class=\"mb-2\">Associated vault: {{ farmerAcc.vault.toBase58() }}</div>\n    <div class=\"mb-2\">Gems staked: {{ farmerAcc.gemsStaked }}</div>\n    <div class=\"mb-2\">\n      Min staking ends: {{ parseDate(farmerAcc.minStakingEndsTs) }}\n    </div>\n    <div class=\"mb-5\">\n      Cooldown ends: {{ parseDate(farmerAcc.cooldownEndsTs) }}\n    </div>\n\n    <div class=\"flex mb-5\">\n      <div class=\"flex-1 mr-5\">\n        <FarmerRewardDisplay\n          :key=\"farmerAcc.rewardA\"\n          :farmReward=\"farmAcc.rewardA\"\n          :reward=\"farmerAcc.rewardA\"\n          title=\"Reward A\"\n        />\n      </div>\n      <div class=\"flex-1\">\n        <FarmerRewardDisplay\n          :key=\"farmerAcc.rewardB\"\n          :farmReward=\"farmAcc.rewardB\"\n          :reward=\"farmerAcc.rewardB\"\n          title=\"Reward B\"\n        />\n      </div>\n    </div>\n    <button class=\"nes-btn is-primary mb-5\" @click=\"refreshFarmer\">\n      Refresh account\n    </button>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, watch } from 'vue';\nimport FarmerRewardDisplay from '@/components/gem-farm/FarmerRewardDisplay.vue';\nimport useWallet from '@/composables/wallet';\nimport useCluster from '@/composables/cluster';\nimport { initGemFarm } from '@/common/gem-farm';\nimport { PublicKey } from '@solana/web3.js';\nimport { parseDate } from '@/common/util';\n\nexport default defineComponent({\n  components: { FarmerRewardDisplay },\n  props: {\n    farm: String,\n    farmAcc: Object,\n    farmer: String,\n    farmerAcc: Object,\n  },\n  emits: ['refresh-farmer'],\n  setup(props, ctx) {\n    const { wallet, getWallet } = useWallet();\n    const { cluster, getConnection } = useCluster();\n\n    let gf: any;\n    watch([wallet, cluster], async () => {\n      gf = await initGemFarm(getConnection(), getWallet()!);\n    });\n\n    //need an onmounted hook because this component isn't yet mounted when wallet/cluster are set\n    onMounted(async () => {\n      if (getWallet() && getConnection()) {\n        gf = await initGemFarm(getConnection(), getWallet()!);\n      }\n    });\n\n    // --------------------------------------- display farmer\n    // todo ideally should be using one from client, but n/a during render\n    const parseFarmerState = (farmer: any): string => {\n      return Object.keys(farmer.state)[0];\n    };\n\n    const refreshFarmer = async () => {\n      await gf.refreshFarmerWallet(\n        new PublicKey(props.farm!),\n        new PublicKey(props.farmer!)\n      );\n      ctx.emit('refresh-farmer');\n    };\n\n    return {\n      refreshFarmer,\n      parseFarmerState,\n      parseDate,\n    };\n  },\n});\n</script>\n\n<style scoped></style>\n"]}]}